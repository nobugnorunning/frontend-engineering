#### 大文件分片上传

1. 选择文件
2. 设置分片大小，默认 5M
3. 切割文件（File.prototype.slice()）
4. 调接口检查该文件有没有上传过，如果上传过的话，已经上传的分片序号是多少，返回文件状态
5. 筛选需要上传的分片（已经上传的分片在后端有缓存）
5. 设置并行任务池，并设置最大并行请求数
6. 调上传接口
7. 所有分片上传完成，调用合并分片接口
8. 完成

#### 后端大文件接收

1. 接收文件分片检查接口，返回文件状态（上传/未上传），已上传的分片数和序号，总分片数（来自前端数据）
2. 创建 uploadId 作为文件唯一标识
3. 如果用 oss 的话，在 第 2 步创建对应目录，返回文件上传地址（每个分片一个地址）
4. 前端开始上传
5. 上传完成后接收分片合并接口，开始合并文件，可配置是否删除文件分片缓存
6. 秒传功能：就是不删缓存，前端上传同一文件的话立即合并，或者文件已经合并的就返回上传成功


#### ？

1. 验证文件完整性

> 前端可使用哈希算法验证文件完整性（Merkel Tree），但是文件过大的情况计算非常耗时，最好放在后端验证，或者使用web worker


#### 启动项目

page下面打开 index.html

nest-demo 运行 npm run start:dev  

node v18+